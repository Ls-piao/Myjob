(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/count/count"],{"0e3b":function(e,t,n){"use strict";n.r(t);var o=n("4545"),a=n("9654");for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n("6888");var i,u=n("f0c5"),s=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,"3a551a1b",null,!1,o["a"],i);t["default"]=s.exports},"0e9c":function(e,t,n){},4545:function(e,t,n){"use strict";var o,a=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o})},6888:function(e,t,n){"use strict";var o=n("0e9c"),a=n.n(o);a.a},"6c41":function(e,t,n){"use strict";(function(e){n("c2bf"),n("921b");o(n("66fd"));var t=o(n("0e3b"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"779c":function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,o,a,r,i){try{var u=e[r](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(o,a)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var r=e.apply(t,n);function u(e){i(r,o,a,u,s,"next",e)}function s(e){i(r,o,a,u,s,"throw",e)}u(void 0)})}}var s={data:function(){return{discounts:"无",showCards:!1,cards:["-1","-2","-3"],index:0,allCount:200,order_id:300,goodsList:[],items:[{value:"man",name:"先生"},{value:"woman",name:"女士"}],pics:[-1,-2,-3],time:0,num:0,shopname:"店名",username:"",userphone:"",des:"",current:0,payitems:[{value:"weixin",name:"微信支付"},{value:"zhifubao",name:"支付宝支付"}],paycurrent:0,paytype:""}},methods:{requestPayment:function(){var t=u(a.default.mark(function t(n){var r,i,u,s,c,d,l=this;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this,0==parseFloat(this.realCount)||0==parseFloat(this.realCount)){t.next=23;break}return console.log(e("正在支付"," at pages\\count\\count.vue:126")),o.showLoading({title:"正在支付..."}),r="",r=this.randomOrder(r),console.log(e(r," at pages\\count\\count.vue:134")),i=this.realCount,u="莫等闲-预定支付",t.next=12,this.getOrderInfo(r,i,u);case 12:if(s=t.sent,s.appid){t.next=17;break}return o.showToast({title:"支付信息有误",icon:"none"}),o.hideLoading(),t.abrupt("return",!1);case 17:c={appid:s.appid,partnerid:s.partnerid,prepayid:s.prepayid,package:"Sign=WXPay",noncestr:s.noncestr,timestamp:s.timestamp,sign:s.sign},{appid:orderInfo2.appid,partnerid:orderInfo2.partnerid,prepayid:orderInfo2.prepayid,package:"Sign=AliPay",noncestr:orderInfo2.noncestr,timestamp:orderInfo2.timestamp,sign:orderInfo2.sign},d=JSON.stringify(c),o.requestPayment({provider:"wxpay",orderInfo:d,success:function(t){o.request({url:l.$bashUrl+"/index.php/home/Api/user_order/",method:"POST",data:{id:l.order_id,price:l.realCount,goods:l.goodsList,pay_state:1},success:function(e){o.showToast({title:"支付成功!",icon:"none"}),o.hideLoading(),setTimeout(function(){o.switchTab({url:"/pages/reserve/reserve"})},2e3)},fail:function(t){o.hideLoading(),console.log(e(t," at pages\\count\\count.vue:198"))}})},fail:function(e){o.hideLoading()},complete:function(t){console.log(e(t," at pages\\count\\count.vue:207")),o.navigateBack({delta:1})}}),t.next=24;break;case 23:o.showToast({title:"订单不能为空",icon:"none"});case 24:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}(),randomOrder:function(e){for(var t=0;t<6;t++)e+=Math.floor(10*Math.random());return(new Date).getTime()+e},getOrderInfo:function(t,n,a){var r=this,i="https://ww.0816fc.net/index.php/home/Pay/pay";return new Promise(function(u){o.request({url:i,method:"POST",data:{id:r.order_id,orderId:t,body:a,price:n,goods:r.goodsList},success:function(t){console.log(e(t," at pages\\count\\count.vue:245")),u(t.data)},fail:function(e){u(e)}})})},chosecards:function(t){console.log(e(t," at pages\\count\\count.vue:255")),this.index=t.target.value},radioChange:function(t){console.log(e(t," at pages\\count\\count.vue:259"));for(var n=0;n<this.items.length;n++)if(this.items[n].value===t.target.value){this.current=n;break}},payChange:function(e){for(var t=0;t<this.items.length;t++)if(this.items[t].value===e.target.value){this.paycurrent=t;break}this.paytype=e.target.value}},computed:{realCount:function(){return this.allCount}},onLoad:function(t){var n=this;this.order_id=t.order_id,this.allCount=t.price,this.goodsList=t.goodslist.split(","),console.log(e(this.goodsList," at pages\\count\\count.vue:288")),o.request({url:this.$bashUrl+"/index.php/home/Api/my_order_info/",method:"POST",data:{good_id:this.order_id},success:function(t){console.log(e(t," at pages\\count\\count.vue:296")),n.time=t.data.infos.point_time,n.num=t.data.infos.num,n.shopname=t.data.store_name}})}};t.default=s}).call(this,n("0de9")["default"],n("6e42")["default"])},9654:function(e,t,n){"use strict";n.r(t);var o=n("779c"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);t["default"]=a.a}},[["6c41","common/runtime","common/vendor"]]]);