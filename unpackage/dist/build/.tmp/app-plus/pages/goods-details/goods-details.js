(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods-details/goods-details"],{"0119":function(t,i,e){"use strict";e.r(i);var s=e("2a77"),o=e.n(s);for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);i["default"]=o.a},"1a4e":function(t,i,e){},2089:function(t,i,e){"use strict";(function(t){e("c2bf"),e("921b");s(e("66fd"));var i=s(e("ae99"));function s(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("6e42")["createPage"])},"2a77":function(t,i,e){"use strict";(function(t,s){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("a34a"));function n(t){return t&&t.__esModule?t:{default:t}}function a(t,i,e,s,o,n,a){try{var r=t[n](a),u=r.value}catch(d){return void e(d)}r.done?i(u):Promise.resolve(u).then(s,o)}function r(t){return function(){var i=this,e=arguments;return new Promise(function(s,o){var n=t.apply(i,e);function r(t){a(n,s,o,r,u,"next",t)}function u(t){a(n,s,o,r,u,"throw",t)}r(void 0)})}}var u={data:function(){return{bb:"paidui-dizhi-quhao",itemLista:{},isnet:!0,notnet:!1,tabIndex:1,indicatorDots:!1,duration:500,shopID:0,shopTYPE:0,shopname:0,imgs:["https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=4067865560,4104866691&fm=15&gp=0.jpg"],itemList:[{imgUrl:"../../static/Icon/pi1.png"},{imgUrl:"../../static/Icon/pi1.png"},{imgUrl:"../../static/Icon/pi1.png"}],current:1,isShowStoreWindow:!1,isSkuWindow:!1,kongzhi:0,itemList1:[],imgUrl:"",paidui:0,paidui_t:0,quhao_1:"false",phone:"",did:0,yyx:!1,pp:0,shopPhone:"",replayList:[],itemList5:[],comment:!0,li_state:"",hotList:[],bannerList:[],isShow:!1,rightListSum:[],showShoppingCart:!0,shoppingCartAnimation:!1,shoppingCarz:0,shopId:0,showBall:!1,animationY:"",animationX:"",ballY:"",ballX:"",leftNav:[],rightNav:[],curListIndex:0,mainCur:0,listHeight:[],scrollY:"",Did:"",Tid:0,zprice:0,goodsList:[],order_id:0,providerList:[],loading:!1,dddd:"",status:0}},onLoad:function(i){var e=this;this.phone=t.getStorageSync("phone"),this.shopID=i.id,this.imgUrl=this.$bashUrl+"/Uploads/",console.log(s(this.imgUrl," at pages\\goods-details\\goods-details.vue:389")),t.request({url:this.$bashUrl+"/index.php/home/Api/store_menu/",method:"POST",data:{id:this.shopID},success:function(t){console.log(s(t," at pages\\goods-details\\goods-details.vue:399")),e.rightNav=t.data.goods,e.leftNav=t.data.type;for(var i=[],o=0;o<e.rightNav.length;o++){var n={showDel:!1,delAnimation:!1,sum:0};i.push(n)}e.rightListSum=i}})},onShow:function(i){var e=this;this.phone=t.getStorageSync("phone");var o=this;t.request({url:this.$bashUrl+"/index.php/home/Api/store_detail/",method:"POST",data:{id:this.shopID},success:function(i){console.log(s(i," at pages\\goods-details\\goods-details.vue:426")),e.bannerList=[],e.bannerList.push(i.data.bunner1),e.bannerList.push(i.data.bunner2),e.bannerList.push(i.data.bunner3),console.log(s(e.bannerList," at pages\\goods-details\\goods-details.vue:431"));var n=0,a=0;t.getLocation({type:"gcj02",geocode:!0,success:function(t){console.log(s(t," at pages\\goods-details\\goods-details.vue:440")),n=t.latitude,a=t.longitude},complete:function(){e.QQMapWX.reverseGeocoder({location:{latitude:n,longitude:a},success:function(t){console.log(s(t," at pages\\goods-details\\goods-details.vue:451")),n=t.result.location.lat,a=t.result.location.lng}}),console.log(s(n,a," at pages\\goods-details\\goods-details.vue:456")),e.$set(i.data,"distance",o.$dis(n,a,Number(i.data.lat),Number(i.data.lng)))}}),o.shopPhone=i.data.phone,o.itemLista=i.data,o.shopname=i.data.name,o.status=i.data.status}}),t.request({url:this.$bashUrl+"/index.php/home/Api/store_state/",method:"POST",data:{id:this.shopID,phone:this.phone},success:function(t){console.log(s(t," at pages\\goods-details\\goods-details.vue:475")),t.data.lines&&(o.quhao_1=t.data.line_state,o.paidui=t.data.lines,o.paidui_t=20*o.paidui,o.pp=Number(t.data.number)+"号"),"flase"==t.data.line_state&&(o.pp="默认"),t.data.point?(o.itemList1=t.data.point,o.yyx=!0):(o.did=o.shopID,o.yyx=!1),o.li_state=t.data.li_state,console.log(s(o.li_state," at pages\\goods-details\\goods-details.vue:493")),o.kongzhi=t.data.state}}),t.request({url:this.$bashUrl+"/index.php/home/Api/comment_store/",method:"POST",data:{id:this.shopID},success:function(t){o.itemList5=t.data,t.data.length>0?o.comment=!0:o.comment=!1;for(var i=0;i<t.data.length;i++){var e=o.itemList5[i].phone;o.itemList5[i].phone=o.passwordTl(e)}}}),console.log(s("获取菜品"," at pages\\goods-details\\goods-details.vue:517")),console.log(s(this.shopID," at pages\\goods-details\\goods-details.vue:518")),t.request({url:this.$bashUrl+"/index.php/home/Api/store_menu/",method:"POST",data:{id:Number(this.shopID)},success:function(t){console.log(s(t," at pages\\goods-details\\goods-details.vue:526"));var i=[];t.data.goods.length>0?(t.data.goods.forEach(function(t,e){e<4&&i.push(t)}),e.hotList=i):e.hotList=[{img:"../../static/zanwu.jpg",name:"暂无数据"}]}})},methods:{closeBlog:function(){this.isShow=!1,this.goodsList=[]},submitOrder:function(){console.log(s(11," at pages\\goods-details\\goods-details.vue:553")),this.goodsList.length>0?(t.showToast({title:"点餐成功",success:function(i){setTimeout(function(){t.switchTab({url:"../reserve/reserve"})},1e3)}}),this.quhao_1=!0):t.showToast({title:"请选择商品",icon:"none"})},delShoppingCard:function(){var t=r(o.default.mark(function t(i){var e=this;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.rightListSum[i].sum-1<=0?(this.rightListSum[i].sum=this.rightListSum[i].sum-1,this.rightListSum[i].delAnimation=!1,this.setDelayTime(100).then(function(){e.rightListSum[i].showDel=!1})):this.rightListSum[i].sum=this.rightListSum[i].sum-1;case 1:case"end":return t.stop()}},t,this)}));function i(i){return t.apply(this,arguments)}return i}(),addShoppingCard:function(t){var i=t.currentTarget.dataset.index;this.goodsList.push(this.rightNav[i].id),this.rightListSum[i].sum=this.rightListSum[i].sum+1,this.rightListSum[i].delAnimation=!0,this.rightListSum[i].showDel=!0;var e=t.detail.x,o=t.detail.y;this.createAnimation(e,o),this.shoppingCarz++,console.log(s(" at pages\\goods-details\\goods-details.vue:601")),this.zprice=(parseFloat(this.zprice)+parseFloat(this.rightNav[i].price)).toFixed(2)},setDelayTime:function(t){return new Promise(function(i,e){setTimeout(function(){i()},t)})},createAnimation:function(i,e){var s=this;t.getSystemInfo({success:function(){var t=r(o.default.mark(function t(n){var a,r,u,d;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=50,r=n.windowHeight-50,u=s.flyX(a,i),d=s.flyY(r,e),s.ballX=i,s.ballY=e,s.showBall=!0,s.setDelayTime(100).then(function(){return s.animationX=u.export(),s.animationY=d.export(),s.setDelayTime(400)}).then(function(){return s.animationX=s.flyX(0,0,0).export(),s.animationY=s.flyY(0,0,0).export(),s.showBall=!1,s.shoppingCartAnimation=!0,s.setDelayTime(400)}).then(function(){s.shoppingCartAnimation=!1});case 8:case"end":return t.stop()}},t,this)}));function n(i){return t.apply(this,arguments)}return n}()})},flyX:function(i,e,s){var o=t.createAnimation({duration:s||400,timingFunction:"linear"});return o.translateX(i-e).step(),o},flyY:function(i,e,s){var o=t.createAnimation({duration:s||400,timingFunction:"ease-in"});return o.translateY(i-e).step(),o},noScroll:function(t){if(this.scrollY=t.detail.scrollTop+20,this.scrollY<0)return this.curListIndex=0,!0;for(var i=0;i<this.listHeight.length-1;i++){var e=this.listHeight[i];this.scrollY>e.start&&this.scrollY<e.end&&(this.curListIndex=i)}},goAnchor:function(t){this.curListIndex=t.currentTarget.dataset.id,this.mainCur=t.currentTarget.dataset.id},calculateHeight:function(){for(var i=this,e=this.rightNav,s=0,o=0;o<e.length;o++){var n=t.createSelectorQuery().in(this);n.select("#main-"+o).boundingClientRect(function(t){var e={};e.start=s,s+=t.height,e.end=s,i.listHeight.push(e)}).exec();var a={showDel:!1,delAnimation:!1,sum:0};this.rightListSum.push(a)}},sign:function(t){},getLocation:function(){var i=this;t.getLocation({type:"gcj02",success:function(e){console.log(s("当前位置的经度："+e.longitude," at pages\\goods-details\\goods-details.vue:734")),console.log(s("当前位置的纬度："+e.latitude," at pages\\goods-details\\goods-details.vue:735")),t.openLocation({latitude:Number(i.itemLista.lat),longitude:Number(i.itemLista.lng)})},fail:function(i){t.showModal({title:"温馨提示",content:"您已拒绝定位,请开启"+i,confirmText:"去设置",success:function(t){t.confirm&&this.openSetting()}})}})},openSetting:function(){t.getSystemInfo({success:function(t){if("ios"==t.platform)plus.runtime.openURL("app-settings://");else if("android"==t.platform){var i=plus.android.runtimeMainActivity(),e=plus.android.importClass("android.content.Intent"),s=new e("android.settings.ACTION_SETTINGS");i.startActivity(s)}}})},callPhone:function(){t.makePhoneCall({phoneNumber:this.shopPhone})},quhao:function(){var i=this;t.getStorageSync("phone")?t.request({url:this.$bashUrl+"/index.php/home/Api/lines/",method:"POST",data:{id:this.shopID,phone:this.phone},success:function(e){i.pp=Number(e.data.number)+"号",i.paidui=Number(e.data.line)+1,i.paidui_t=20*i.paidui,t.showToast({title:"取号成功",duration:2e3,success:function(t){}}),i.quhao_1="true",setTimeout(function(){t.showModal({title:"取号成功是否点餐",content:"是否去点餐",success:function(t){console.log(s(t," at pages\\goods-details\\goods-details.vue:813")),1==t.confirm&&(console.log(s(1," at pages\\goods-details\\goods-details.vue:815")),i.isShow=!0)}})},2e3)}}):(t.showToast({title:"未登录~",duration:3e3}),t.navigateTo({url:"/pages/sigUp/sigUp"}))},swiperChange:function(t){this.current=t.detail.current+1},Todianchan:function(i){t.getStorageSync("phone")?t.navigateTo({url:"/pages/paidui/paidui?aid="+this.shopID+"&name="+this.shopname+"&did="+this.did}):(t.showToast({title:"未登录~",duration:3e3}),t.navigateTo({url:"/pages/sigUp/sigUp"}))},passwordTl:function(t){var i=/^(\d{3})\d{4}(\d{4})$/;return t.replace(i,"$1****$2")}}};i.default=u}).call(this,e("6e42")["default"],e("0de9")["default"])},"5b0b":function(t,i,e){"use strict";var s,o=function(){var t=this,i=t.$createElement;t._self._c},n=[];e.d(i,"b",function(){return o}),e.d(i,"c",function(){return n}),e.d(i,"a",function(){return s})},"774e":function(t,i,e){"use strict";var s=e("1a4e"),o=e.n(s);o.a},ae99:function(t,i,e){"use strict";e.r(i);var s=e("5b0b"),o=e("0119");for(var n in o)"default"!==n&&function(t){e.d(i,t,function(){return o[t]})}(n);e("774e");var a,r=e("f0c5"),u=Object(r["a"])(o["default"],s["b"],s["c"],!1,null,"3aa72564",null,!1,s["a"],a);i["default"]=u.exports}},[["2089","common/runtime","common/vendor"]]]);